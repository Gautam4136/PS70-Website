<!DOCTYPE html>
<html lang="en">

<title>PS70: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-dark" style=" color: #EEE7E8;">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h2 class="nav-title">PS70 Fall 2024</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">
<p class="margin"></p>

<h3>Automatic Music Engraver</h3>
To help with my music composition assignments for my Intro to Music Composition class,
I decided to build an automatic music engraver. This is a device that will convert any melody 
played into notes on a staff with the right pitches, rests and note lengths. I initially tried using a tft LCD
but it turned out to be too slow and hard to code the music notation. Thus, I switched to using the esp32 to 
send the states of the 12 keys as serial input which would then be read using pyserial, and used by a python Program
to generate the visualisation using matplotlib.
<br></br>
The hardest part about the project was the sound engineering. Single notes sounded fine, but when two notes were played simulatenously,
the speaker would stutter. I initially thought it was an issue with the loop slowing down, but after probing with the oscilloscope,
I realized that the wave forms sent to the speaker had varying amplitudes, with beat nodes. I realized that this is what you get when you
add multiple sine waves of different frequencies. I then decided to add 2-3 harmonics for each key which made the sound intensity smoother,
but the timbre was still coarse and unpleasant. That was still better than the stutter, so I left it at that.
<br></br>
The python program uses an array to store the key states over 4 musical measures, and approximates key presses to 1/4, 1/8, or 1/16th notes.
They are displayed on a treble cleff.
<br></br>
Limit switches were aligned beneath the 3d printed keys for the springy feel. Everything was soldered to a protoboard.
<br></br>

<h4>Demo Videos</h4>

<p>Playing the whole chromatic scale:</p>
<video width="75%" controls>
  <source src="./whole-chromatic-scale.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

<p>Playing some chords:</p>
<video width="75%" controls>
  <source src="./chords.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

<p>Playing Happy Birthday:</p>
<video width="75%" controls>
  <source src="./happy-bday.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

<p>Playing my own melody:</p>
<video width="75%" controls>
  <source src="./my_melody.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

</div>
</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>